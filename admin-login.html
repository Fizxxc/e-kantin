<!DOCTYPE html>
<html>
<head>
  <title>Login Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.lordicon.com/lordicon.js"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-rose-600 to-red-500 flex items-center justify-center">

  <div class="bg-white/20 backdrop-blur-xl p-8 rounded-2xl shadow-xl w-[360px] text-center">

    <lord-icon src="https://cdn.lordicon.com/kthelypq.json"
      trigger="loop" style="width:80px;height:80px"></lord-icon>

    <h2 class="text-2xl text-white font-bold mb-6">Admin Login</h2>

    <input id="email" class="w-full p-3 rounded-lg border mb-3" placeholder="Email">
    <input id="pass" class="w-full p-3 rounded-lg border mb-5" type="password" placeholder="Password">

    <button onclick="doLogin()" class="w-full bg-red-700 text-white p-3 rounded-lg">Login Admin</button>

    <p class="text-white mt-4 text-sm">
      Belum punya akun admin?
      <a href="/admin-register" class="underline">Register Admin</a>
    </p>

  </div>

  <script type="module">
    import { loginAdmin, isAdmin } from "./js/firebase.js";

    async function doLogin() {
      try {
        const cred = await loginAdmin(email.value, pass.value);
        const ok = await isAdmin(cred.user.uid);

        if (!ok) {
          Swal.fire("Gagal", "Akun ini bukan admin!", "error");
          return;
        }

        Swal.fire("Berhasil", "Login admin sukses", "success")
          .then(() => location.href = "/dashboard");

      } catch (e) {
        Swal.fire("Error", "Login gagal", "error");
      }
    }
  </script>

</body>
</html>
