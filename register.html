<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Daftar User â€” E-Kantin</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.lordicon.com/lusqsztk.js"></script>

  <style>
    body { background: linear-gradient(135deg,#00b09b,#96c93d); }
    .glass { background: rgba(255,255,255,0.08); backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,0.08); }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

  <main class="w-full max-w-md glass rounded-3xl p-8 shadow-2xl text-white">
    <div class="flex justify-center mb-4">
      <lord-icon src="https://cdn.lordicon.com/ajkxzzfb.json" trigger="loop" style="width:96px;height:96px"></lord-icon>
    </div>

    <h1 class="text-2xl font-bold text-center mb-2">Daftar User</h1>
    <p class="text-center text-white/70 mb-6">Buat akun untuk memesan lebih cepat</p>

    <div class="space-y-4">
      <input id="regEmail" type="email" placeholder="Email"
        class="w-full p-3 rounded-xl bg-white/10 placeholder-white/60 outline-none border border-white/5" />

      <input id="regPassword" type="password" placeholder="Password"
        class="w-full p-3 rounded-xl bg-white/10 placeholder-white/60 outline-none border border-white/5" />

      <button id="btnRegister" class="w-full py-3 rounded-xl bg-emerald-500 hover:bg-emerald-600 transition font-semibold shadow">
        Daftar
      </button>
    </div>

    <div class="mt-5 text-center text-white/70 text-sm">
      Sudah punya akun? <a href="/login" class="text-white underline">Login</a>
    </div>
  </main>

  <script type="module">
    import { registerUser } from "./js/firebase.js";

    const btnRegister = document.getElementById("btnRegister");

    btnRegister.addEventListener("click", async () => {
      const emailVal = document.getElementById("regEmail").value.trim();
      const passVal  = document.getElementById("regPassword").value.trim();

      if(!emailVal || !passVal){
        Swal.fire({ icon: "warning", title: "Isi semua data" });
        return;
      }

      try {
        await registerUser(emailVal, passVal);
        Swal.fire({ icon: "success", title: "Akun dibuat", text: "Silakan login", timer: 1200, showConfirmButton: false })
          .then(()=> location.href = "/login");
      } catch (err) {
        Swal.fire({ icon: "error", title: "Gagal daftar", text: err.message || "Coba lagi" });
      }
    });
  </script>
</body>
</html>
